数据类型指的是值类型

，无论是什么类型，最终存的都是字符串

``````
set 无序，不重复
zset 有序，不重复，添加时需要指定权重-分数，按照从小到大排序，不重复指的是，值不能重复，分数可以重复
分数相同，按照字母的先后顺序排序

``````

* 字符串
  * set get incr 默认增加1  incrby 指定增加数值，而且可以指定－ incrby a -1，

* hash
  * hset hmset hget hgetall



setex 针对字符串

expires 通用的



Redis事务

ACID四个特性

提供了一定的事务支持，可以保证一组操作院子执行不被打断，但是如果执行中出现错误，事物不会回滚，Redis未提供回滚支持，会继续执行后面的指令

* multi 开启事务,开启事务后所有的操作都是添加到队列中，执行关闭事务的命令时才会执行之前的命令
* exec 关闭事务

watch 事务被执行前监听值，如果在提交事务之前这个值发生了变化，则执行事务会返回nil，表示这个事务没有被执行

Redis cluster 不支持事务



Redis可以将数据写入到磁盘中，在停机或者宕机的时候，将磁盘中的备份数据加载到内存中恢复使用

持久化机制：

* RDB快照持久化，是默认开启的  bgsave说动触发快照，shutdown 关闭Redis再触发一次快照，是通过创建一个子进程来处理
* AOF追加文件持久化,redis可以将执行的所有指令追加记录到文件中持久化存储，, 有三种机制来同步数据，每秒、每次操作always，no-交给操作系统去同步，一般设置为每秒，最坏情况只丢失一秒的数据

 ### 主从

info Replication 查看当前Redis的信息  



### redis高可用

哨兵机制

- 心跳机制 监控master
- 提供主动通知的方式，
- automatic failover 故障转移，自动故障转移，自动将slave提升成master，重启master，正常后，自动降级变为slave
- configured provider配置提供者，直接配置哨兵地址，客户端直接请求哨兵地址，会自动请求到master，

  

